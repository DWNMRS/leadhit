(function(){"use strict";var t={5e3:function(t,e,s){var i=s(6848),a=(s(4114),s(3518)),n=s(6178),r=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("TheContainer",[e("AppAuth")],1)},o=[],l=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"container"},[t._t("default")],2)},u=[],c=(0,i.pM)({__name:"TheContainer",setup(t){return{__sfc:!0}}}),d=c,h=s(1656),p=(0,h.A)(d,l,u,!1,null,"49e2262d",null),v=p.exports,f=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"auth"},[e("h1",{staticClass:"auth__title"},[t._v("LeadHit")]),e("div",{staticClass:"auth__wrapper"},[e("form",{staticClass:"auth__form",on:{submit:function(e){return e.preventDefault(),t.getMessage.apply(null,arguments)}}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.siteId,expression:"siteId"}],staticClass:"auth__input",attrs:{type:"text",maxlength:"24"},domProps:{value:t.siteId},on:{input:[function(e){e.target.composing||(t.siteId=e.target.value)},t.removeError]}}),e("button",{staticClass:"auth__btn",attrs:{type:"submit"}},[t._v("Войти")]),e("span",{class:{auth__message:!0,"auth__message--active":t.errorMessage}},[t._v(t._s(t.errorMessage))])])])])},_=[],m=(0,i.pM)({name:"AppAuth",data(){return{siteId:"",errorMessage:""}},methods:{...(0,a.i0)(["fetchMessage"]),getMessage(){24===this.siteId.length?this.fetchMessage(this.siteId):this.errorMessage="Ошибка: ID сайта должен содержать  24 символа"},removeError(){this.errorMessage=""}}}),y=m,A=(0,h.A)(y,f,_,!1,null,null,null),g=A.exports,b=(0,i.pM)({name:"PageAuth",components:{TheContainer:v,AppAuth:g}}),w=b,x=(0,h.A)(w,r,o,!1,null,null,null),C=x.exports,M=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("TheContainer",[e("AppAnalytics")],1)},I=[],T=function(){var t=this,e=t._self._c;return e("div",{staticClass:"analytics"},[e("h1",{staticClass:"analytics__title"},[t._v("Аналитика")]),e("div",{staticClass:"analytics__wrapper"},[e("h2",{staticClass:"analytics__sub-title"},[t._v("Аналитика по визитам")]),e("div",{staticClass:"analytics__chart",attrs:{id:"chartdiv"}}),e("button",{staticClass:"analytics__btn",on:{click:t.deleteKey}},[t._v("Удалить Ключ")])])])},k=[],O=s(6753),P=s(8236),j=s(7109),F=s(9203),D=s(2523),X=s(9943),Y=s(4907),E=s(1653),S=s(1164),G=s(7203),L=s(2803),W=s(3571),z=s(8625),K=s(9591),$={name:"AppAnalytics",data(){return{visits:[{date:"2020-07-01",visits:213},{date:"2020-07-02",visits:249},{date:"2020-07-03",visits:179},{date:"2020-07-04",visits:170},{date:"2020-07-05",visits:184},{date:"2020-07-06",visits:202},{date:"2020-07-07",visits:198},{date:"2020-07-08",visits:168},{date:"2020-07-09",visits:176},{date:"2020-07-10",visits:171},{date:"2020-07-11",visits:190},{date:"2020-07-12",visits:154},{date:"2020-07-13",visits:246},{date:"2020-07-14",visits:250},{date:"2020-07-15",visits:227},{date:"2020-07-16",visits:140},{date:"2020-07-17",visits:170},{date:"2020-07-18",visits:125},{date:"2020-07-19",visits:106},{date:"2020-07-20",visits:207},{date:"2020-07-21",visits:222},{date:"2020-07-22",visits:198},{date:"2020-07-23",visits:204},{date:"2020-07-24",visits:213},{date:"2020-07-25",visits:145},{date:"2020-07-26",visits:166},{date:"2020-07-27",visits:163},{date:"2020-07-28",visits:135},{date:"2020-07-29",visits:45}]}},mounted(){this.checkAuthentication()},computed:{isAuthenticated(){return!!localStorage.getItem("leadhit-site-id")}},methods:{checkAuthentication(){try{this.isAuthenticated?this.buildChart():this.redirectToAuthPage()}catch(t){console.error("Ошибка:",t)}},deleteKey(){localStorage.removeItem("leadhit-site-id"),this.redirectToAuthPage()},redirectToAuthPage(){q.push({path:"/leadhit"})},buildChart(){var t=O.b.new("chartdiv");t.setThemes([K.A.new(t)]),t.dateFormatter.setAll({dateFormat:"yyyy-MM-dd",dateFields:["valueX"]});var e=t.container.children.push(Y.C.new(t,{focusable:!0,panX:!0,panY:!0,wheelX:"panX",wheelY:"zoomX",pinchZoomX:!0,paddingLeft:0}));e.get("colors").set("colors",[P.yW("#b700ff")]);var s=e.xAxes.push(E.c.new(t,{maxDeviation:.1,groupData:!1,baseInterval:{timeUnit:"day",count:1},renderer:S.j.new(t,{minorGridEnabled:!0,minGridDistance:70}),tooltip:j.m.new(t,{})})),i=e.yAxes.push(G.F.new(t,{maxDeviation:.2,renderer:L.Q.new(t,{})})),a=e.series.push(W.I.new(t,{minBulletDistance:10,connect:!1,xAxis:s,yAxis:i,valueYField:"visits",valueXField:"date",tooltip:j.m.new(t,{pointerOrientation:"horizontal",labelText:"{valueY}"})}));a.fills.template.setAll({fillOpacity:.2,visible:!0}),a.strokes.template.setAll({strokeWidth:2}),a.data.processor=F.X.new(t,{dateFormat:"yyyy-MM-dd",dateFields:["date"]}),a.data.setAll(this.visits),a.bullets.push((function(){var e=D.j.new(t,{radius:4,fill:P.yW("#b700ff"),strokeWidth:2});return X.D.new(t,{sprite:e})}));var n=e.set("cursor",z.A.new(t,{xAxis:s,behavior:"none"}));n.lineY.set("visible",!1),e.appear(1e3,100)}}},H=$,R=(0,h.A)(H,T,k,!1,null,"3b00171c",null),Z=R.exports,B=(0,i.pM)({name:"PageAuth",components:{TheContainer:v,AppAnalytics:Z}}),N=B,Q=(0,h.A)(N,M,I,!1,null,null,null),U=Q.exports,q=new n.Ay({mode:"history",routes:[{path:"/leadhit",name:"leadhit",component:C,meta:{title:"Авторизация"}},{path:"/leadhit/analytics",name:"analytics",component:U,meta:{title:"Аналитика"}}]});const J="https://track-api.leadhit.io/client/test_auth";i.Ay.use(a.Ay);var V=new a.Ay.Store({actions:{async fetchMessage(t,e){try{const t=await fetch(J,{method:"GET",headers:{"Api-Key":`${e}:eEZn8u05G3bzRpdL7RiHCvrYAYo`,"Leadhit-Site-Id":e}}),s=await t.json();"ok"===s.message&&(localStorage.setItem("leadhit-site-id",`${e}`),q.push({path:"/leadhit/analytics"}))}catch(s){console.error("Ошибка:",s)}}}}),tt=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},et=[],st=(0,i.pM)({name:"App"}),it=st,at=(0,h.A)(it,tt,et,!1,null,null,null),nt=at.exports;i.Ay.config.productionTip=!1,i.Ay.use(n.Ay),new i.Ay({store:V,router:q,render:t=>t(nt)}).$mount("#app")}},e={};function s(i){var a=e[i];if(void 0!==a)return a.exports;var n=e[i]={exports:{}};return t[i].call(n.exports,n,n.exports,s),n.exports}s.m=t,function(){var t=[];s.O=function(e,i,a,n){if(!i){var r=1/0;for(c=0;c<t.length;c++){i=t[c][0],a=t[c][1],n=t[c][2];for(var o=!0,l=0;l<i.length;l++)(!1&n||r>=n)&&Object.keys(s.O).every((function(t){return s.O[t](i[l])}))?i.splice(l--,1):(o=!1,n<r&&(r=n));if(o){t.splice(c--,1);var u=a();void 0!==u&&(e=u)}}return e}n=n||0;for(var c=t.length;c>0&&t[c-1][2]>n;c--)t[c]=t[c-1];t[c]=[i,a,n]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={524:0};s.O.j=function(e){return 0===t[e]};var e=function(e,i){var a,n,r=i[0],o=i[1],l=i[2],u=0;if(r.some((function(e){return 0!==t[e]}))){for(a in o)s.o(o,a)&&(s.m[a]=o[a]);if(l)var c=l(s)}for(e&&e(i);u<r.length;u++)n=r[u],s.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return s.O(c)},i=self["webpackChunkleadhit_test"]=self["webpackChunkleadhit_test"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=s.O(void 0,[504],(function(){return s(5e3)}));i=s.O(i)})();
//# sourceMappingURL=app.f5d33b54.js.map